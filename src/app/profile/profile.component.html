<div class="profile-container">
  <div class="user-info">
    <h2>рЃърЃарЃЮрЃцрЃўрЃџрЃў</h2>

    <!-- Debug info - can remove after fixing -->
    <div *ngIf="!user" class="alert alert-info">
      рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃЕрЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃљ...
    </div>

    <div class="user-details">
      <div class="detail-item">
        <span class="label">рЃАрЃљрЃ«рЃћрЃџрЃў:</span>
        <span class="value">{{ user?.firstName || "рЃљрЃа рЃљрЃарЃўрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў" }}</span>
      </div>
      <div class="detail-item">
        <span class="label">рЃњрЃЋрЃљрЃарЃў:</span>
        <span class="value">{{ user?.lastName || "рЃљрЃа рЃљрЃарЃўрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў" }}</span>
      </div>
      <div class="detail-item">
        <span class="label">рЃбрЃћрЃџрЃћрЃцрЃЮрЃюрЃў:</span>
        <span class="value">{{
          user?.phoneNumber || "рЃљрЃа рЃљрЃарЃўрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў"
        }}</span>
      </div>
      <div class="detail-item">
        <span class="label">рЃЏрЃћрЃўрЃџрЃў:</span>
        <span class="value">{{ user?.email || "рЃљрЃа рЃљрЃарЃўрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃБрЃџрЃў" }}</span>
      </div>
    </div>
  </div>

  <div class="rental-history">
    <h3>рЃюрЃљрЃЦрЃўрЃарЃљрЃЋрЃћрЃЉрЃў рЃЏрЃљрЃюрЃЦрЃљрЃюрЃћрЃЉрЃў</h3>

    <div *ngIf="rentals?.length; else noRentals" class="rentals-grid">
      <div *ngFor="let rental of rentals" class="rental-card">
        <div class="car-image">
          <img
            [src]="rental.car.imageUrl1"
            [alt]="rental.car.brand + ' ' + rental.car.model"
          />
        </div>
        <div class="rental-details">
          <h4>{{ rental.car.brand }} {{ rental.car.model }}</h4>
          <div class="detail-row">
            <i class="icon">­ЪЊЇ</i>
            <span>{{ rental.car.city }}</span>
          </div>
          <div class="detail-row">
            <i class="icon">РЈ▒№ИЈ</i>
            <span>рЃЦрЃўрЃарЃљрЃЮрЃЉрЃўрЃА рЃ«рЃљрЃюрЃњрЃарЃФрЃџрЃўрЃЋрЃЮрЃЉрЃљ: {{ rental.days }} рЃЊрЃдрЃћ</span>
          </div>
          <div class="detail-row">
            <i class="icon">­Ъњ░</i>
            <span>рЃ»рЃљрЃЏрЃБрЃарЃў рЃдрЃўрЃарЃћрЃЉрЃБрЃџрЃћрЃЉрЃљ: {{ rental.totalPrice }}РѓЙ</span>
          </div>
          <div class="detail-row">
            <i class="icon">­Ъњ│</i>
            <span
              >рЃЊрЃдрЃўрЃБрЃарЃў рЃдрЃўрЃарЃћрЃЉрЃБрЃџрЃћрЃЉрЃљ: {{ rental.totalPrice / rental.days }}РѓЙ</span
            >
          </div>
          <div class="rental-dates">
            <small>
              <i class="icon">­ЪЊЁ</i>
              рЃЊрЃљрЃгрЃДрЃћрЃЉрЃљ: {{ rental.startDate | date : "medium" }} - рЃЊрЃљрЃАрЃарЃБрЃџрЃћрЃЉрЃљ:
              {{ rental.endDate | date : "medium" }}
            </small>
          </div>
          <!-- <button class="delete-btn" (click)="deleteRental(rental.id)">
            <i class="icon">­ЪЌЉ№ИЈ</i> рЃгрЃљрЃерЃџрЃљ
          </button> -->
          <div class="rental-actions">
            <a
              [routerLink]="rental.car.id ? ['/car', rental.car.id] : []"
              class="view-details"
              [class.disabled]="!rental.car.id"
            >
              рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃў
            </a>
          </div>
        </div>
      </div>
    </div>

    <ng-template #noRentals>
      <div class="no-rentals">
        <p>рЃЌрЃЦрЃЋрЃћрЃю рЃ»рЃћрЃа рЃљрЃа рЃњрЃљрЃЦрЃЋрЃЌ рЃюрЃљрЃЦрЃўрЃарЃљрЃЋрЃћрЃЉрЃў рЃЏрЃљрЃюрЃЦрЃљрЃюрЃћрЃЉрЃў</p>
      </div>
    </ng-template>
  </div>

  <div class="favorites-section">
    <h3>рЃЕрЃћрЃЏрЃў рЃцрЃљрЃЋрЃЮрЃарЃўрЃбрЃћрЃЉрЃў</h3>

    <div *ngIf="favorites.length > 0; else noFavorites" class="favorites-grid">
      <div *ngFor="let car of favorites" class="favorite-car-card">
        <div class="favorite-car-image">
          <img [src]="car.imageUrl1" [alt]="car.brand + ' ' + car.model" />
        </div>
        <div class="favorite-car-info">
          <h4>{{ car.brand }} {{ car.model }}</h4>
          <p>{{ car.year }} | {{ car.city }}</p>
          <p class="favorite-car-price">
            {{ car.price * car.multiplier }}РѓЙ / рЃЊрЃдрЃћ
          </p>
          <div class="favorite-car-actions">
            <button class="remove-favorite" (click)="removeFavorite(car)">
              <i>­ЪЌЉ№ИЈ</i> рЃгрЃљрЃерЃџрЃљ
            </button>
            <a [routerLink]="['/car', car.id]" class="view-details">
              рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃў
            </a>
          </div>
        </div>
      </div>
    </div>

    <ng-template #noFavorites>
      <p class="no-favorites-message">рЃЌрЃЦрЃЋрЃћрЃю рЃ»рЃћрЃа рЃљрЃа рЃњрЃљрЃЦрЃЋрЃЌ рЃцрЃљрЃЋрЃЮрЃарЃўрЃбрЃў рЃЏрЃљрЃюрЃЦрЃљрЃюрЃћрЃЉрЃў</p>
    </ng-template>
  </div>

  <div class="uploaded-cars-section">
    <h3>рЃЕрЃћрЃЏрЃА рЃЏрЃўрЃћрЃа рЃљрЃбрЃЋрЃўрЃарЃЌрЃБрЃџрЃў рЃЏрЃљрЃюрЃЦрЃљрЃюрЃћрЃЉрЃў</h3>

    <div
      *ngIf="uploadedCars?.length; else noUploads"
      class="uploaded-cars-grid"
    >
      <div *ngFor="let car of uploadedCars" class="car-card">
        <div class="car-image">
          <img [src]="car.imageUrl1" [alt]="car.brand + ' ' + car.model" />
        </div>
        <div class="car-info">
          <h4>{{ car.brand }} {{ car.model }}</h4>
          <p>{{ car.year }} | {{ car.city }}</p>
          <p class="car-price">{{ car.price * car.multiplier }}РѓЙ / рЃЊрЃдрЃћ</p>
          <div class="car-actions">
            <button class="delete-btn" (click)="deleteCar(car.id)">
              <i>­ЪЌЉ№ИЈ</i> рЃгрЃљрЃерЃџрЃљ
            </button>
            <a [routerLink]="['/car', car.id]" class="view-details">
              рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃў
            </a>
          </div>
        </div>
      </div>
    </div>

    <ng-template #noUploads>
      <p class="no-uploads-message">рЃЌрЃЦрЃЋрЃћрЃю рЃ»рЃћрЃа рЃљрЃа рЃњрЃљрЃЦрЃЋрЃЌ рЃљрЃбрЃЋрЃўрЃарЃЌрЃБрЃџрЃў рЃЏрЃљрЃюрЃЦрЃљрЃюрЃћрЃЉрЃў</p>
    </ng-template>
  </div>
</div>
